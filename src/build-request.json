{
  "kind": "build_request",
  "title": "Add celebratory message when a user extends their streak",
  "projectName": "Stay Beautifully Positive",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Show a small, time-limited celebratory message in the UI when a signed-in user successfully completes a daily check-in and their streak increases (i.e., they kept their streak going).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "That would be amazing."
        ]
      },
      "acceptanceCriteria": [
        "After a successful check-in, the app displays a short celebratory message that is specifically tied to the streak being extended (not just streakCount > 0).",
        "The celebratory message automatically disappears after a short duration (e.g., a few seconds) without requiring user interaction.",
        "The celebratory message is not shown when the user is not authenticated, when the check-in fails, or when the user has already checked in for the current UTC day.",
        "All user-facing text for the celebratory message is in English."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Update the check-in success flow to determine whether the streak was extended by comparing the new streak value returned by updateDailyTracker() with the previously cached/loaded streak value, and trigger the celebratory message only when the new value is greater than the previous value.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "That would be amazing."
        ]
      },
      "acceptanceCriteria": [
        "If the previous streak value is N and the check-in mutation returns N+1, the celebratory message is triggered.",
        "If the previous streak value is N and the check-in mutation returns N (e.g., already checked in today), the celebratory message is not triggered.",
        "The streak display remains accurate after check-in (streak query is refreshed/invalidated as needed)."
      ]
    }
  ],
  "constraints": [
    "Do not edit any files under frontend/src/components/ui or any paths listed in frontend.immutablePaths in SYSTEM_CONTEXT.",
    "Keep backend logic in a single actor (backend/main.mo); do not introduce additional backend services."
  ],
  "nonGoals": [
    "Do not add new authentication providers (Internet Identity only).",
    "Do not add leaderboards, social sharing, notifications, or any new backend data models unrelated to the celebratory message.",
    "Do not change the streak calculation rules in the backend (only react to the streak value returned)."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}